(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{2288:function(s,t,a){"use strict";a.r(t);var e=a(2),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"持续集成流程说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#持续集成流程说明"}},[s._v("#")]),s._v(" 持续集成流程说明")]),s._v(" "),e("ul",[e("li",[e("img",{attrs:{src:a(727),alt:""}})]),s._v(" "),e("li",[s._v("1）首先，开发人员每天进行代码提交，提交到 Git 仓库")]),s._v(" "),e("li",[s._v("2）然后，Jenkins 作为持续集成工具，使用 Git 工具到 Git 仓库拉取代码到集成服务器，再配合 JDK，Maven 等软件完成代码编译，代码测试与审查，测试，打包等工作，在这个过程中每一步出错，都重新再执行一次整个流程。")]),s._v(" "),e("li",[s._v("3）最后，Jenkins 把生成的 jar 或 war 包分发到测试服务器或者生产服务器，测试人员或用户就可以访问应用。")])]),s._v(" "),e("h3",{attrs:{id:"服务器列表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务器列表"}},[s._v("#")]),s._v(" 服务器列表")]),s._v(" "),e("ul",[e("li",[s._v("本课程虚拟机统一采用 CentOS7。")]),s._v(" "),e("li",[e("img",{attrs:{src:a(728),alt:""}})])]),s._v(" "),e("h2",{attrs:{id:"gitlab-代码托管服务器安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-代码托管服务器安装"}},[s._v("#")]),s._v(" Gitlab 代码托管服务器安装")]),s._v(" "),e("h3",{attrs:{id:"gitlab-简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-简介"}},[s._v("#")]),s._v(" Gitlab 简介")]),s._v(" "),e("ul",[e("li",[s._v("官网： https://about.gitlab.com/")]),s._v(" "),e("li",[s._v("GitLab 是一个用于仓库管理系统的开源项目，使用 Git 作为代码管理工具，并在此基础上搭建起来的 web 服务。")]),s._v(" "),e("li",[s._v("GitLab 和 GitHub 一样属于第三方基于 Git 开发的作品，免费且开源（基于 MIT 协议），与 Github 类似，可以注册用户，任意提交你的代码，添加 SSHKey 等等。不同的是，GitLab 是可以部署到自己的服务器上，数据库等一切信息都掌握在自己手上，适合团队内部协作开发，你总不可能把团队内部的智慧总放在别人的服务器上吧？简单来说可把 GitLab 看作个人版的 GitHub。")])]),s._v(" "),e("h3",{attrs:{id:"gitlab-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-安装"}},[s._v("#")]),s._v(" Gitlab 安装")]),s._v(" "),e("ul",[e("li",[e("ol",[e("li",[s._v("安装相关依赖")])])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" policycoreutils openssh-server openssh-clients postfix\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("ol",{attrs:{start:"2"}},[e("li",[s._v("启动 ssh 服务&设置为开机启动")])])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("systemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" sshd "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start sshd\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("ol",{attrs:{start:"3"}},[e("li",[s._v("设置 postfix 开机自启，并启动，postfix 支持 gitlab 发信功能")])])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("systemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" postfix "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" systemctl start postfix\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("ol",{attrs:{start:"4"}},[e("li",[s._v("开放 ssh 以及 http 服务，然后重新加载防火墙列表")])])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("firewall-cmd --add-service"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ssh "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--permanent")]),s._v("\nfirewall-cmd --add-service"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--permanent")]),s._v("\nfirewall-cmd "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--reload")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("如果关闭防火墙就不需要做以上配置")]),s._v(" "),e("ul",[e("li",[e("ol",{attrs:{start:"5"}},[e("li",[s._v("下载 gitlab 包，并且安装在线下载安装包：")])]),s._v(" "),e("ul",[e("li",[s._v("wget https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el6/gitlab-ce-12.4.2-ce.0.el6.x\n86_64.rpm")]),s._v(" "),e("li",[s._v("安装：rpm -i gitlab-ce-12.4.2-ce.0.el6.x86_64.rpm")])])]),s._v(" "),e("li",[e("ol",{attrs:{start:"6"}},[e("li",[s._v("修改 gitlab 配置")])])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/gitlab/gitlab.rb\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("p",[s._v("修改 gitlab 访问地址和端口，默认为 80，我们改为 82")])]),s._v(" "),e("li",[e("p",[s._v("external_url 'http://192.168.66.100:82'")])]),s._v(" "),e("li",[e("p",[s._v("nginx['listen_port'] = 82")])]),s._v(" "),e("li",[e("ol",{attrs:{start:"7"}},[e("li",[s._v("重载配置及启动 gitlab")])])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("gitlab-ctl reconfigure\ngitlab-ctl restart\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[e("ol",{attrs:{start:"8"}},[e("li",[s._v("把端口添加到防火墙")])])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("firewall-cmd "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--zone")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("82")]),s._v("/tcp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--permanent")]),s._v("\nfirewall-cmd "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--reload")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[s._v("启动成功后，看到以下修改管理员 root 密码的页面，修改密码后，然后登录即可")]),s._v(" "),e("li",[e("img",{attrs:{src:a(729),alt:""}})])]),s._v(" "),e("h3",{attrs:{id:"gitlab-添加组、创建用户、创建项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-添加组、创建用户、创建项目"}},[s._v("#")]),s._v(" Gitlab 添加组、创建用户、创建项目")]),s._v(" "),e("ul",[e("li",[s._v("1）创建组")]),s._v(" "),e("li",[s._v("使用管理员 root 创建组，一个组里面可以有多个项目分支，可以将开发添加到组里面进行设置权限，不同的组就是公司不同的开发项目或者服务模块，不同的组添加不同的开发即可实现对开发设置权限的管理")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(730),alt:""}})]),s._v(" "),e("p",[e("img",{attrs:{src:a(731),alt:""}})]),s._v(" "),e("p",[s._v("2）创建用户\n创建用户的时候，可以选择 Regular 或 Admin 类型。\n"),e("img",{attrs:{src:a(732),alt:""}})]),s._v(" "),e("p",[s._v("创建完用户后，立即修改密码\n"),e("img",{attrs:{src:a(733),alt:""}})]),s._v(" "),e("p",[s._v("3）将用户添加到组中\n选择某个用户组，进行 Members 管理组的成员")]),s._v(" "),e("p",[e("img",{attrs:{src:a(734),alt:""}})]),s._v(" "),e("p",[e("img",{attrs:{src:a(735),alt:""}})]),s._v(" "),e("p",[s._v("Gitlab 用户在组里面有 5 种不同权限：\nGuest：可以创建 issue、发表评论，不能读写版本库 Reporter：可以克隆代码，不能提交，QA、PM\n可以赋予这个权限 Developer：可以克隆代码、开发、提交、push，普通开发可以赋予这个权限\nMaintainer：可以创建项目、添加 tag、保护分支、添加项目成员、编辑项目，核心开发可以赋予这个\n权限 Owner：可以设置项目访问权限 - Visibility Level、删除项目、迁移项目、管理组成员，开发组组\n长可以赋予这个权限")]),s._v(" "),e("p",[s._v("4）在用户组中创建项目\n以刚才创建的新用户身份登录到 Gitlab，然后在用户组中创建新的项目")]),s._v(" "),e("p",[e("img",{attrs:{src:a(736),alt:""}})]),s._v(" "),e("p",[e("img",{attrs:{src:a(737),alt:""}})])])}),[],!1,null,null,null);t.default=r.exports},727:function(s,t,a){s.exports=a.p+"assets/img/7.220b5217.png"},728:function(s,t,a){s.exports=a.p+"assets/img/8.c57112a8.png"},729:function(s,t,a){s.exports=a.p+"assets/img/9.5e5e0742.png"},730:function(s,t,a){s.exports=a.p+"assets/img/10.2dc12f64.png"},731:function(s,t,a){s.exports=a.p+"assets/img/11.1fba6c3d.png"},732:function(s,t,a){s.exports=a.p+"assets/img/12.8c6394b6.png"},733:function(s,t,a){s.exports=a.p+"assets/img/13.83c9dbdd.png"},734:function(s,t,a){s.exports=a.p+"assets/img/14.b8ad837b.png"},735:function(s,t,a){s.exports=a.p+"assets/img/15.cff4fe1f.png"},736:function(s,t,a){s.exports=a.p+"assets/img/16.a72d5380.png"},737:function(s,t,a){s.exports=a.p+"assets/img/17.8ee19d37.png"}}]);