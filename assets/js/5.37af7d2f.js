(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1022:function(s,t,a){s.exports=a.p+"assets/img/116.030b4c34.png"},1023:function(s,t,a){s.exports=a.p+"assets/img/117.0021c260.png"},1024:function(s,t,a){s.exports=a.p+"assets/img/118.125664bb.png"},1025:function(s,t,a){s.exports=a.p+"assets/img/119.99297ec7.png"},1026:function(s,t,a){s.exports=a.p+"assets/img/120.dc60a3b1.png"},1027:function(s,t,a){s.exports=a.p+"assets/img/121.f1ab577c.png"},1028:function(s,t,a){s.exports=a.p+"assets/img/122.dcb29c16.png"},1029:function(s,t,a){s.exports=a.p+"assets/img/123.44217514.png"},1030:function(s,t,a){s.exports=a.p+"assets/img/124.7e9e0696.png"},1031:function(s,t,a){s.exports=a.p+"assets/img/125.23a805ab.png"},1032:function(s,t,a){s.exports=a.p+"assets/img/126.5b1a3360.png"},1033:function(s,t,a){s.exports=a.p+"assets/img/127.ce050d0d.png"},1034:function(s,t,a){s.exports=a.p+"assets/img/128.56e9922d.png"},1035:function(s,t,a){s.exports=a.p+"assets/img/129.f8044935.png"},1036:function(s,t,a){s.exports=a.p+"assets/img/130.9540ba5d.png"},1037:function(s,t,a){s.exports=a.p+"assets/img/131.80c3526c.png"},1038:function(s,t,a){s.exports=a.p+"assets/img/132.8fa66279.png"},1039:function(s,t,a){s.exports=a.p+"assets/img/133.c49ad59c.png"},1040:function(s,t,a){s.exports=a.p+"assets/img/134.be5de09f.png"},1041:function(s,t,a){s.exports=a.p+"assets/img/135.82b5eb7a.png"},1042:function(s,t,a){s.exports=a.p+"assets/img/136.8a0d43f7.png"},1043:function(s,t,a){s.exports=a.p+"assets/img/137.ec9fa1f8.png"},1044:function(s,t,a){s.exports=a.p+"assets/img/138.00be566e.png"},1045:function(s,t,a){s.exports=a.p+"assets/img/139.034df6dd.png"},1046:function(s,t,a){s.exports=a.p+"assets/img/140.18517674.png"},1047:function(s,t,a){s.exports=a.p+"assets/img/141.f17d970d.png"},1048:function(s,t,a){s.exports=a.p+"assets/img/142.5eb0db2a.png"},1049:function(s,t,a){s.exports=a.p+"assets/img/143.971e025d.png"},1050:function(s,t,a){s.exports=a.p+"assets/img/144.900e4ae9.png"},1051:function(s,t,a){s.exports=a.p+"assets/img/145.bb0ccf7f.png"},1052:function(s,t,a){s.exports=a.p+"assets/img/146.52c64f14.png"},1053:function(s,t,a){s.exports=a.p+"assets/img/147.68b8d00d.png"},1054:function(s,t,a){s.exports=a.p+"assets/img/148.6eb0ca9d.png"},1055:function(s,t,a){s.exports=a.p+"assets/img/149.c11aacda.png"},2704:function(s,t,a){"use strict";a.r(t);var e=a(2),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"总体步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总体步骤"}},[s._v("#")]),s._v(" 总体步骤")]),s._v(" "),e("p",[s._v("·搜索镜像\n·拉取镜像\n·查看镜像\n·启动镜像\n·服务端口映射\n·停止容器\n·移除容器")]),s._v(" "),e("h2",{attrs:{id:"安装-tomcat"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-tomcat"}},[s._v("#")]),s._v(" 安装 tomcat")]),s._v(" "),e("p",[s._v("·docker hub 上面查找 tomcat 镜像\n·docker search tomcat\n"),e("img",{attrs:{src:a(1022),alt:""}}),s._v("\n·从 docker hub 上拉取 tomcat 镜像到本地\n·docker pull tomcat")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1023),alt:""}})]),s._v(" "),e("p",[s._v("·docker images 查看是否有拉取到的 tomcat\n"),e("img",{attrs:{src:a(1024),alt:""}})]),s._v(" "),e("p",[s._v("·使用 tomcat 镜像创建容器实例(也叫运行镜像)\n·docker run -it -p 8080:8080 tomcat\n·-p 小写，主机端口:docker 容器端口\n·-P 大写，随机分配端口\n"),e("img",{attrs:{src:a(1025),alt:""}}),s._v("\n·i:交互\n·t:终端\n·d:后台\n·访问猫首页\n·问题")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1026),alt:""}}),s._v("\n·解决\n·可能没有映射端口或者没有关闭防火墙\n"),e("img",{attrs:{src:a(1027),alt:""}}),s._v("\n·把 webapps.dist 目录换成 webapps\n·先成功启动 tomcat")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1028),alt:""}}),s._v("\n·查看 webapps 文件夹查看为空\n"),e("img",{attrs:{src:a(1029),alt:""}})]),s._v(" "),e("p",[s._v("·免修改版说明\n·docker pull billygoo/tomcat8-jdk8\n·docker run -d -p 8080:8080 --name mytomcat8 billygoo/tomcat8-jdk8")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1030),alt:""}})]),s._v(" "),e("h2",{attrs:{id:"安装-mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-mysql"}},[s._v("#")]),s._v(" 安装 mysql")]),s._v(" "),e("p",[s._v("·docker hub 上面查找 mysql 镜像\n"),e("img",{attrs:{src:a(1031),alt:""}}),s._v("\n·从 docker hub 上(阿里云加速器)拉取 mysql 镜像到本地标签为 5.7\n"),e("img",{attrs:{src:a(1032),alt:""}})]),s._v(" "),e("p",[s._v("·使用 mysql5.7 镜像创建容器(也叫运行镜像)\n·命令出处，哪里来的？\n"),e("img",{attrs:{src:a(1033),alt:""}}),s._v("\n·简单版\n·使用 mysql 镜像\ndocker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7\ndocker ps\ndocker exec -it 容器 ID /bin/bash\nmysql -uroot -p\n"),e("img",{attrs:{src:a(1034),alt:""}}),s._v("\n·建库建表插入数据\n"),e("img",{attrs:{src:a(1035),alt:""}}),s._v("\n·外部 Win10 也来连接运行在 dokcer 上的 mysql 容器实例服务")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1036),alt:""}}),s._v("\n·问题\n·插入中文数据试试\n"),e("img",{attrs:{src:a(1037),alt:""}}),s._v("\n·为什么报错?\n·docker 上默认字符集编码隐患")]),s._v(" "),e("p",[s._v("docker 里面的 mysql 容器实例查看，内容如下：")]),s._v(" "),e("p",[s._v("SHOW VARIABLES LIKE 'character%'\n"),e("img",{attrs:{src:a(1038),alt:""}}),s._v("\n·删除容器后，里面的 mysql 数据如何办\n·容器实例一删除，你还有什么？ 删容器到跑路。。。。。？\n·实战版\n·新建 mysql 容器实例")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v(":3306 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--privileged")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /zzyyuse/mysql/log:/var/log/mysql "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /zzyyuse/mysql/data:/var/lib/mysql "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /zzyyuse/mysql/conf:/etc/mysql/conf.d "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" mysql mysql:5.7\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:a(1039),alt:""}}),s._v("\n·新建 my.cnf\n·通过容器卷同步给 mysql 容器实例")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("client"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("default_character_set")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ncollation_server "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf8_general_ci\ncharacter_set_server "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf8\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("img",{attrs:{src:a(1040),alt:""}}),s._v("\n·重新启动 mysql 容器实例再重新进入并查看字符编码")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1041),alt:""}}),s._v("\n·再新建库新建表再插入中文测试\n"),e("img",{attrs:{src:a(1042),alt:""}})]),s._v(" "),e("p",[e("img",{attrs:{src:a(1043),alt:""}}),s._v("\n·结论")]),s._v(" "),e("p",[s._v("之前的 DB  无效")]),s._v(" "),e("p",[s._v("修改字符集操作+重启 mysql 容器实例")]),s._v(" "),e("p",[s._v("之后的 DB  有效，需要新建")]),s._v(" "),e("p",[s._v("结论：docker 安装完 MySQL 并 run 出容器后，建议请先修改完字符集编码后再新建 mysql 库-表-插数据\n"),e("img",{attrs:{src:a(1044),alt:""}}),s._v("\n·假如将当前容器实例删除，再重新来一次，之前建的 db01 实例还有吗？trytry")]),s._v(" "),e("h2",{attrs:{id:"安装-redis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-redis"}},[s._v("#")]),s._v(" 安装 redis")]),s._v(" "),e("p",[s._v("·从 docker hub 上(阿里云加速器)拉取 redis 镜像到本地标签为 6.0.8\n"),e("img",{attrs:{src:a(1045),alt:""}})]),s._v(" "),e("p",[s._v("·入门命令\n"),e("img",{attrs:{src:a(1046),alt:""}}),s._v("\n·命令提醒：容器卷记得加入--privileged=true\nDocker 挂载主机目录 Docker 访问出现 cannot open directory .: Permission denied\n解决办法：在挂载目录后多加一个--privileged=true 参数即可\n·在 CentOS 宿主机下新建目录/app/redis\n"),e("img",{attrs:{src:a(1047),alt:""}}),s._v("\n1 建目录\n  mkdir -p /app/redis\n·mkdir -p /app/redis\n·将一个 redis.conf 文件模板拷贝进/app/redis 目录下")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1048),alt:""}}),s._v("\n2 拷贝配置文件\n  将准备好的 redis.conf 文件放进/app/redis 目录下\n·/app/redis 目录下修改 redis.conf 文件")]),s._v(" "),e("p",[s._v("3 /app/redis 目录下修改 redis.conf 文件\n  3.1 开启 redis 验证      可选\n    requirepass 123")]),s._v(" "),e("p",[s._v("3.2 允许 redis 外地连接   必须\n      注释掉 # bind 127.0.0.1")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1049),alt:""}}),s._v("\n  3.3   daemonize no\n     将 daemonize yes 注释起来或者 daemonize no 设置，因为该配置和 docker run 中-d 参数冲突，会导致容器一直启动失败")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1050),alt:""}}),s._v("\n  3.4 开启 redis 数据持久化   appendonly yes  可选")]),s._v(" "),e("p",[s._v("????????????后面都是些什么鬼？？？？？？")]),s._v(" "),e("p",[s._v("·使用 redis6.0.8 镜像创建容器(也叫运行镜像)")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run  "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(":6379 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" myr3 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--privileged")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /app/redis/redis.conf:/etc/redis/redis.conf "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /app/redis/data:/data "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" redis:6.0.8 redis-server /etc/redis/redis.conf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:a(1051),alt:""}}),s._v("\n·测试 redis-cli 连接上来")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1052),alt:""}}),s._v("\n docker exec -it 运行着 Rediis 服务的容器 ID redis-cli\n·请证明 docker 启动使用了我们自己指定的配置文件\n·修改前")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1053),alt:""}}),s._v("\n我们用的配置文件，数据库默认是 16 个\n·修改后\n"),e("img",{attrs:{src:a(1054),alt:""}}),s._v("\n宿主机的修改会同步给 docker 容器里面的配置。\n·记得重启服务\n·测试 redis-cli 连接上来第 2 次\n"),e("img",{attrs:{src:a(1055),alt:""}})]),s._v(" "),e("h2",{attrs:{id:"安装-nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-nginx"}},[s._v("#")]),s._v(" 安装 Nginx")]),s._v(" "),e("p",[s._v("·见高级篇 Portainer")])])}),[],!1,null,null,null);t.default=r.exports}}]);