(window.webpackJsonp=window.webpackJsonp||[]).push([[185],{1636:function(s,t,v){s.exports=v.p+"assets/img/10.e77979da.png"},1637:function(s,t,v){s.exports=v.p+"assets/img/11.706cd6cc.png"},1638:function(s,t,v){s.exports=v.p+"assets/img/12.ded9ced1.png"},3422:function(s,t,v){"use strict";v.r(t);var e=v(2),i=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"本周介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#本周介绍"}},[s._v("#")]),s._v(" 本周介绍")]),s._v(" "),e("h3",{attrs:{id:"确立本周目标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#确立本周目标"}},[s._v("#")]),s._v(" 确立本周目标")]),s._v(" "),e("ul",[e("li",[s._v("● 脚手架的实现原理、调试原理")]),s._v(" "),e("li",[s._v("● Lerna的常见用法、源码分析")]),s._v(" "),e("li",[s._v("● 架构设计技巧和架构图绘制方法")]),s._v(" "),e("li",[s._v("● Node的module模块分析")]),s._v(" "),e("li",[s._v("● yargs使用方法")]),s._v(" "),e("li",[s._v("● 剖析Lerna架构设计")])]),s._v(" "),e("h3",{attrs:{id:"前端研发脚手架imooc-cli核心功能演示"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前端研发脚手架imooc-cli核心功能演示"}},[s._v("#")]),s._v(" 前端研发脚手架imooc-cli核心功能演示")]),s._v(" "),e("ul",[e("li",[s._v("● 安装imooc-cli脚手架： npm i -g  @imooc-cli/core")]),s._v(" "),e("li",[s._v("● 查看脚手架相关内容：  imooc-cli")]),s._v(" "),e("li",[s._v("● 通过脚手架新建项目:    imooc-cli init")]),s._v(" "),e("li",[s._v("● 项目发布到测试环境：  imooc-cli publish")]),s._v(" "),e("li",[s._v("● 项目发布到正式环境:    imooc-cli publish --prod")])]),s._v(" "),e("h3",{attrs:{id:"脚手架在课程中的定位"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#脚手架在课程中的定位"}},[s._v("#")]),s._v(" 脚手架在课程中的定位")]),s._v(" "),e("ul",[e("li",[s._v("● 本项目中基础项目均由脚手架管理")]),s._v(" "),e("li",[s._v("● 技术简历突出")]),s._v(" "),e("li",[s._v("● 提高技能")])]),s._v(" "),e("h2",{attrs:{id:"脚手架开发入门"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#脚手架开发入门"}},[s._v("#")]),s._v(" 脚手架开发入门")]),s._v(" "),e("h3",{attrs:{id:"站在前端研发的视角-分析开发脚手架的必要性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#站在前端研发的视角-分析开发脚手架的必要性"}},[s._v("#")]),s._v(" 站在前端研发的视角，分析开发脚手架的必要性")]),s._v(" "),e("ul",[e("li",[s._v("开发imooc-cli脚手架的核心目标：提升前端研发效能【提炼通用代码、通用流程、构建发布上线】")])]),s._v(" "),e("blockquote",[e("p",[s._v("大厂研发架构图\n"),e("img",{attrs:{src:v(1636),alt:""}})])]),s._v(" "),e("ul",[e("li",[s._v("● 脚手架核心价值：自动化、标准化、数据化")]),s._v(" "),e("li",[s._v("● 和自动化构建工具(jenkins、travia)区别：自动化构建工具在服务端执行，无法覆盖本地操作且定制自动化的构建工具需要用到Java等后端语言，对前端不友好。")])]),s._v(" "),e("h3",{attrs:{id:"从使用角度理解什么是脚手架"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#从使用角度理解什么是脚手架"}},[s._v("#")]),s._v(" 从使用角度理解什么是脚手架？")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("● 脚手架简介：脚手架的本质是一个操作系统的客户端，通过命令行执行。")])]),s._v(" "),e("li",[e("p",[s._v("● 脚手架执行原理：\n"),e("img",{attrs:{src:v(1637),alt:""}})])]),s._v(" "),e("li",[e("p",[s._v("● 从应用角度看vue-cli开发脚手架过程：")]),s._v(" "),e("ul",[e("li",[e("ol",[e("li",[s._v("首先是个npm项目，项目中有一个bin/vue.js的文件，且这个项目发布到了npm上")])])]),s._v(" "),e("li",[e("ol",{attrs:{start:"2"}},[e("li",[s._v("将npm项目安装到了lib/node_modules")])])]),s._v(" "),e("li",[e("ol",{attrs:{start:"3"}},[e("li",[s._v("在node的bin目录下配置软链接到lib/node_modules/@vue/cli/bin/vue.js")])])])])])]),s._v(" "),e("h4",{attrs:{id:"脚手架执行原理解析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#脚手架执行原理解析"}},[s._v("#")]),s._v(" 脚手架执行原理解析：")]),s._v(" "),e("ul",[e("li",[s._v("在终端输入：vue create vue-test-app\n"),e("ul",[e("li",[e("ol",[e("li",[s._v("终端解析vue命令【通过which vue查找vue】")])])]),s._v(" "),e("li",[e("ol",{attrs:{start:"2"}},[e("li",[s._v("根据vue命令链接到实际的vue.js文件")])])]),s._v(" "),e("li",[e("ol",{attrs:{start:"3"}},[e("li",[s._v("终端使用node执行vue.js文件")])])]),s._v(" "),e("li",[e("ol",{attrs:{start:"4"}},[e("li",[s._v("vue.js文件解析command/options")])])]),s._v(" "),e("li",[e("ol",{attrs:{start:"5"}},[e("li",[s._v("vue.js文件执行command")])])]),s._v(" "),e("li",[e("ol",{attrs:{start:"6"}},[e("li",[s._v("执行完毕，退出执行")])])])])])]),s._v(" "),e("h3",{attrs:{id:"脚手架原理讲解-上"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#脚手架原理讲解-上"}},[s._v("#")]),s._v(" 脚手架原理讲解(上)")]),s._v(" "),e("ul",[e("li",[s._v("问题一：为什么全局安装@vue/cli后,我们执行的命令为 vue呢？")])]),s._v(" "),e("blockquote",[e("p",[s._v("答：这是因为通过which vue后我们会看到vue所在目录，而这个vue是一个软链接，指向的是@vue/cli。确定这个vue命令名称的是在"),e("code",[s._v("node/v12.16.1/lib/node_modules/@vue/cli")]),s._v("目录下package.json中的bin的键值。")])]),s._v(" "),e("ul",[e("li",[s._v("问题二：全局安装@vue/cli时发生了什么?")])]),s._v(" "),e("blockquote",[e("p",[s._v("答：执行 npm install -g @vue/cli的时候，首先node会把我们当前包下载到node下的node_modules中去。下载完成后，会在下载好的包中查找package.json中是否有bin，如果有，会通过package.json中的bin中的键去配置软链接。")])]),s._v(" "),e("blockquote",[e("p",[s._v("上面两个问题其实问题二在前，问题一在后，两个问题说的是一个流程的双向解释，理解了问题二，问题一就清楚了。")])]),s._v(" "),e("ul",[e("li",[s._v("问题三：执行vue命令时发生了什么？为什么vue指向一个js文件，我们却可以通过vue命令执行它？")])]),s._v(" "),e("blockquote",[e("p",[s._v("答：首先执行vue命令，与执行which vue打印出来的地址  效果是等价的(即执行的是which vue的那个软连接:/Users/liumingzhou/.nvm/versions/node/v12.16.1/bin/vue)。\n而软连接又指向它的实际文件存在路径(../lib/node_modules/@vue/cli/bin/vue.js)。")])]),s._v(" "),e("blockquote",[e("p",[s._v("我们知道，一个test.js文件可以通过node执行，但不能单独执行，这是因为它没有可执行权限。\n我们在/Users/liumingzhou/Desktop目录下新建一个test.js文件，我们可以给这个js文件一个执行权限：chmod 777 test.js  然后在命令行直接输入 ./test.js仍然不可以执行。这是因为js文件需要一个解释器来进行执行，这个node就是一个解释器。(.py文件需要 python解释器执行，.java文件需要java解释器进行执行)。")])]),s._v(" "),e("blockquote",[e("p",[s._v("那么我们上面的vue.js文件是怎么执行的呢？\n通过查看vue.js文件源码，我们发现第一行代码是这样的：#!/usr/bin/env node\n这行代码的意思是：告诉我们的操作系统，直接调用这个文件的时候，到环境变量中查找node命令执行。\n(/usr/bin/env 是我们的环境变量)")])]),s._v(" "),e("blockquote",[e("p",[s._v("然后，我们在我们的test.js文件中第一行加入这行代码  #!/usr/bin/env node\n直接输入 ./test.js 即可执行这个js文件。")])]),s._v(" "),e("blockquote",[e("p",[s._v("接着，我们不想用 ./test.js这样的方式执行js文件，我们想通过一个命令，比如 liugezhou 这个命令来执行这个test.js文件，我们需要怎么做呢？\n第一种方式，我们去找环境变量，通过 echo $PATH")])]),s._v(" "),e("blockquote",[e("p",[s._v("首先，我们创建一个环境变量：\ncd  /Users/liumingzhou/.nvm/versions/node/v12.16.1/bin\n创建软连接：ln -s  /Users/liumingzhou/Desktop/test.js  liugezhou\n创建完毕后，就可以看到一个liugezhou软连接，我们在任何目录执行liugezhou就可以执行test.js文件了。")])]),s._v(" "),e("h3",{attrs:{id:"脚手架原理讲解-下"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#脚手架原理讲解-下"}},[s._v("#")]),s._v(" 脚手架原理讲解（下）")]),s._v(" "),e("ul",[e("li",[s._v("问题一：为什么说脚手架本质是操作系统的客户端？它和我们在PC上安装的应用/软件有什么区别")])]),s._v(" "),e("blockquote",[e("p",[s._v("脚手架执行起来的本质是靠node这个命令，node是一个操作系统客户端，而test.js 这个文件仅仅是作为一个参数注入到node命令中。node本质上是一个可执行文件(在window操作系统中可以看到node的扩展名为.exe的)。\n本质来说没有区别。区别仅仅是安装的应用软件会提供一个GUI,而node并没有提供GUI")])]),s._v(" "),e("ul",[e("li",[s._v("问题二：如何为node脚手架命令创建别名")])]),s._v(" "),e("blockquote",[e("p",[s._v("方法一：即为上文提到的创建一个软连接。\n接着，我们希望继续为上文提到的  liugezhou 软连接继续添加一个别名，我们需要这么做\n在上文的bin目录下，执行命令  ln -s ./liugezhou liugezhou2\n即 软连接可以嵌套。")])]),s._v(" "),e("ul",[e("li",[s._v("问题三：描述脚手架命令执行的全过程")])]),s._v(" "),e("blockquote",[e("p",[e("img",{attrs:{src:v(1638),alt:""}})])]),s._v(" "),e("h3",{attrs:{id:"脚手架开发流程和难点解析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#脚手架开发流程和难点解析"}},[s._v("#")]),s._v(" 脚手架开发流程和难点解析")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("通过以上分析，我们大致了解一个脚手架的开发流程如下：")]),s._v(" "),e("ul",[e("li",[s._v("● 创建一个npm项目")]),s._v(" "),e("li",[s._v("● 创建脚手架的入口文件，且入口文件需要添加代码：#!/usr/bin/env node")]),s._v(" "),e("li",[s._v("● 配置package.json文件，添加bin属性(指定脚手架命令与地址)")]),s._v(" "),e("li",[s._v("● 编写脚手架代码")]),s._v(" "),e("li",[s._v("● 将脚手架发布到npm")])])]),s._v(" "),e("li",[e("p",[s._v("使用流程：")]),s._v(" "),e("ul",[e("li",[s._v("● 安装脚手架： npm install - g your-own-cli")]),s._v(" "),e("li",[s._v("● 使用脚手架： your-own-cli")])])]),s._v(" "),e("li",[e("p",[s._v("脚手架开发难点：")]),s._v(" "),e("ul",[e("li",[e("ol",[e("li",[s._v("脚手架开发过程中通常需要将复杂的系统拆分为多个模块(分包)")])])]),s._v(" "),e("li",[e("ol",{attrs:{start:"2"}},[e("li",[s._v("脚手架开发过程中需要注册一系列的命令。如何对命令进行注册是一个重要的环节")])])]),s._v(" "),e("li",[e("ol",{attrs:{start:"3"}},[e("li",[s._v("需要对参数进行解析:     [vue command [options] "),e("params",[s._v("]")])],1)])]),s._v(" "),e("li",[e("ol",{attrs:{start:"4"}},[e("li",[s._v("帮助文档：global[主命令]")])])]),s._v(" "),e("li",[s._v("…………\n命令行交互、日志打印、命令行文字变色、网络通信 HTTP/WebSocket、文件处理等。")])])])]),s._v(" "),e("h3",{attrs:{id:"快速入门第一个脚手架"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速入门第一个脚手架"}},[s._v("#")]),s._v(" 快速入门第一个脚手架")]),s._v(" "),e("ul",[e("li",[s._v("通过上节流程，我们本节快速开发一个liugezhou-test脚手架并发布，流程如下:\n"),e("ul",[e("li",[s._v("● cd /Users/liumingzhou/Desktop")]),s._v(" "),e("li",[s._v("● mkdir liugezhou-test")]),s._v(" "),e("li",[s._v("● cd liugezhou-test")]),s._v(" "),e("li",[s._v("● npm init -y")]),s._v(" "),e("li",[s._v("● 终端打开liugezhou-test项目：新建lib目录，lib目录下新建index.js文件（index.js文件内容如下）")]),s._v(" "),e("li",[s._v('● 修改package.json文件，添加 "bin":{"liugezhou-test":"lib/index.js"}')]),s._v(" "),e("li",[s._v("● npm publish 发布npm包")]),s._v(" "),e("li",[s._v("● 下载安装：npm i -g liugezhou-test")]),s._v(" "),e("li",[s._v("● 测试：liugezhou-test")])])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/usr/bin/env node")]),s._v("\n\nconsole.log"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'welcome liugezhou-test'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("这里注意一点，在npm publish的时候，如果是在Descktop目录下执行的，那么我们下载liugezhou-test包之后，会看到软链指向的是本地，这是因为npm为了我们本地调试：如果/Desktop目录下有这个包，会指向本地。")])])}),[],!1,null,null,null);t.default=i.exports}}]);