(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{2280:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"gitlab-官网地址"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-官网地址"}},[s._v("#")]),s._v(" GitLab 官网地址")]),s._v(" "),n("ul",[n("li",[s._v("官网地址：https://about.gitlab.com/")]),s._v(" "),n("li",[s._v("安装说明：https://about.gitlab.com/installation/")])]),s._v(" "),n("h2",{attrs:{id:"服务器准备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#服务器准备"}},[s._v("#")]),s._v(" 服务器准备")]),s._v(" "),n("ul",[n("li",[s._v("准备一个系统为 CentOS7 以上版本的服务器，要求内存 4G，磁盘 50G。")]),s._v(" "),n("li",[s._v("关闭防火墙，并且配置好主机名和 IP，保证服务器可以上网。")]),s._v(" "),n("li",[s._v("此教程使用虚拟机：主机名：gitlab-server IP 地址：192.168.6.200")])]),s._v(" "),n("h2",{attrs:{id:"安装包准备"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装包准备"}},[s._v("#")]),s._v(" 安装包准备")]),s._v(" "),n("ul",[n("li",[s._v("Yum 在线安装 gitlab- ce 时，需要下载几百 M 的安装文件，非常耗时，所以最好提前把\n所需 RPM 包下载到本地，然后使用离线 rpm 的方式安装。\n下载地址："),n("code",[s._v("https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/7/gitlab-ce-13.10.2-ce.0.el7.x86_64.rpm")])])]),s._v(" "),n("p",[s._v("注：资料里提供了此 rpm 包，直接将此包上传到服务器/opt/module 目录下即可.")]),s._v(" "),n("h2",{attrs:{id:"编写安装脚本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编写安装脚本"}},[s._v("#")]),s._v(" 编写安装脚本")]),s._v(" "),n("p",[s._v("安装 gitlab 步骤比较繁琐，因此我们可以参考官网编写 gitlab 的安装脚本。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@gitlab-server module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim gitlab-install.sh")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ivh")]),s._v(" /opt/module/gitlab-ce-13.10.2-ce.0.el7.x86_64.rpm\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" policycoreutils-python openssh-server cronie\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" lokkit "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" http "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" postfix\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" postfix start\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" postfix on\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("EXTERNAL_URL")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://gitlab.example.com"')]),s._v(" yum "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gitlab-ce\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("ul",[n("li",[s._v("给脚本增加执行权限")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@gitlab-server module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod +x gitlab-install.sh")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@gitlab-server module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\n总用量 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("403104")]),s._v("\n-rw-r--r--. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("412774002")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 月 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":47 gitlab-ce-13.10.2-\nce.0.el7.x86_64.rpm\n-rwxr-xr-x. "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("416")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 月 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":49 gitlab-install.sh\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("然后执行该脚本，开始安装 gitlab-ce。注意一定要保证服务器可以上网。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@gitlab-server module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./gitlab-install.sh")]),s._v("\n警告：/opt/module/gitlab-ce-13.10.2-ce.0.el7.x86_64.rpm: 头 V4\nRSA/SHA1 Signature, 密钥 ID f27eab47: NOKEY\n准备中"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#################################")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("%"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n正在升级/安装"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":gitlab-ce-13.10.2-ce.0.el7\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("################################# [100%]")]),s._v("\n。 。 。 。 。 。\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"初始化-gitlab-服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始化-gitlab-服务"}},[s._v("#")]),s._v(" 初始化 GitLab 服务")]),s._v(" "),n("ul",[n("li",[s._v("执行以下命令初始化 GitLab 服务，过程大概需要几分钟，耐心等待...")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@gitlab-server module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gitlab-ctl reconfigure")]),s._v("\n。 。 。 。 。 。\nRunning handlers:\nRunning handlers complete\nChef Client finished, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("425")]),s._v("/608 resources updated "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" 03 minutes 08\nseconds\ngitlab Reconfigured"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"启动-gitlab-服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启动-gitlab-服务"}},[s._v("#")]),s._v(" 启动 GitLab 服务")]),s._v(" "),n("ul",[n("li",[s._v("执行以下命令启动 GitLab 服务，如需停止，执行 gitlab-ctl stop")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@gitlab-server module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gitlab-ctl start")]),s._v("\nok: run: alertmanager: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6812")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 134s\nok: run: gitaly: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6740")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 135s\nok: run: gitlab-monitor: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6765")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 135s\n\nok: run: gitlab-workhorse: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6722")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 136s\nok: run: logrotate: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5994")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 197s\nok: run: nginx: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5930")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 203s\nok: run: node-exporter: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6234")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 185s\nok: run: postgres-exporter: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6834")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 133s\nok: run: postgresql: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5456")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 257s\nok: run: prometheus: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6777")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 134s\nok: run: redis: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5327")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 263s\nok: run: redis-exporter: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6391")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 173s\nok: run: sidekiq: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5797")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 215s\nok: run: unicorn: "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pid "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5728")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 221s\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h2",{attrs:{id:"使用浏览器访问-gitlab"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用浏览器访问-gitlab"}},[s._v("#")]),s._v(" 使用浏览器访问 GitLab")]),s._v(" "),n("ul",[n("li",[s._v("使用主机名或者 IP 地址即可访问 GitLab 服务。需要提前配一下 windows 的 hosts 文件。")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(717),alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(718),alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(719),alt:""}})]),s._v(" "),n("ul",[n("li",[s._v("首次登陆之前，需要修改下 GitLab 提供的 root 账户的密码，要求 8 位以上，包含大小\n写子母和特殊符号。因此我们修改密码为 Atguigu.123456")]),s._v(" "),n("li",[s._v("然后使用修改后的密码登录 GitLab。")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(720),alt:""}})]),s._v(" "),n("p",[s._v("GitLab 登录成功。\n"),n("img",{attrs:{src:a(721),alt:""}})]),s._v(" "),n("h2",{attrs:{id:"gitlab-创建远程库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-创建远程库"}},[s._v("#")]),s._v(" GitLab 创建远程库")]),s._v(" "),n("p",[n("img",{attrs:{src:a(722),alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(723),alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(724),alt:""}})]),s._v(" "),n("h2",{attrs:{id:"idea-集成-gitlab"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#idea-集成-gitlab"}},[s._v("#")]),s._v(" IDEA 集成 GitLab")])])}),[],!1,null,null,null);t.default=e.exports},717:function(s,t,a){s.exports=a.p+"assets/img/1.a8c4035d.png"},718:function(s,t,a){s.exports=a.p+"assets/img/2.2a5e49a2.png"},719:function(s,t,a){s.exports=a.p+"assets/img/3.9cc08565.png"},720:function(s,t,a){s.exports=a.p+"assets/img/4.9ead5e34.png"},721:function(s,t,a){s.exports=a.p+"assets/img/5.f4362f87.png"},722:function(s,t,a){s.exports=a.p+"assets/img/6.46cc1bf6.png"},723:function(s,t,a){s.exports=a.p+"assets/img/7.ce4bb89c.png"},724:function(s,t,a){s.exports=a.p+"assets/img/8.3f4918dd.png"}}]);