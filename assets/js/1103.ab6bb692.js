(window.webpackJsonp=window.webpackJsonp||[]).push([[1103],{2982:function(a,s,n){"use strict";n.r(s);var t=n(2),e=Object(t.a)({},(function(){var a=this,s=a.$createElement,n=a._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h2",{attrs:{id:"前话"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前话"}},[a._v("#")]),a._v(" 前话")]),a._v(" "),n("ul",[n("li",[a._v("安装Docker时，它会自动创建三个网络，bridge（创建容器默认连接到此网络）、 none 、host\n"),n("ul",[n("li",[a._v("None：该模式关闭了容器的网络功能,对外界完全隔离")]),a._v(" "),n("li",[a._v("host：容器将不会虚拟出自己的网卡，配置自己的IP等，而是使用宿主机的IP和端口。")]),a._v(" "),n("li",[a._v("bridge 桥接网络，此模式会为每一个容器分配IP")])])]),a._v(" "),n("li",[a._v("可以使用该"),n("code",[a._v("--network")]),a._v("标志来指定容器应连接到哪些网络")])]),a._v(" "),n("h2",{attrs:{id:"bridge-桥接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bridge-桥接"}},[a._v("#")]),a._v(" bridge(桥接)")]),a._v(" "),n("ul",[n("li",[a._v("bridge网络代表所有Docker安装中存在的网络")]),a._v(" "),n("li",[a._v("除非你使用该"),n("code",[a._v("docker run --network=<NETWORK>")]),a._v("选项指定，否则Docker守护程序默认将容器连接到此网络")]),a._v(" "),n("li",[a._v("bridge模式使用 "),n("code",[a._v("--net=bridge")]),a._v(" 指定，默认设置")])]),a._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#列出当前的网络")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" inspect bridge "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看当前的桥连网络")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nginx1 nginx\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nginx2 "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--link")]),a._v(" nginx1 nginx\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" nginx2 "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" update\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" inetutils-ping  "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#ping")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" dnsutils        "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#nslookup")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" net-tools       "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#ifconfig")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" iproute2        "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#ip")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#curl")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /etc/hosts\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("ping")]),a._v(" nginx1\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br")])]),n("h2",{attrs:{id:"none"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#none"}},[a._v("#")]),a._v(" none")]),a._v(" "),n("ul",[n("li",[a._v("none模式使用"),n("code",[a._v("--net=none")]),a._v("指定")])]),a._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# --net 指定无网络")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nginx_none "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),a._v(" none nginx\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" inspect none\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" nginx_none "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("ip")]),a._v(" addr\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("h2",{attrs:{id:"host"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#host"}},[a._v("#")]),a._v(" host")]),a._v(" "),n("ul",[n("li",[a._v("host模式使用 "),n("code",[a._v("--net=host")]),a._v(" 指定")])]),a._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nginx_host "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v(" nginx\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" inspect "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("host")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" nginx_host "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("ip")]),a._v(" addr\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br")])]),n("h2",{attrs:{id:"端口映射"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#端口映射"}},[a._v("#")]),a._v(" 端口映射")]),a._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看镜像里暴露出的端口号")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" image inspect nginx\n"),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ExposedPorts"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"80/tcp"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 让宿主机的8080端口映射到docker容器的80端口")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" port_nginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v(":80  nginx\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看主机绑定的端口")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" container port port_nginx\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br")])]),n("h2",{attrs:{id:"指向主机的随机端口"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#指向主机的随机端口"}},[a._v("#")]),a._v(" 指向主机的随机端口")]),a._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" random_nginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--publish")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(" nginx\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" port random_nginx\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" randomall_nginx --publish-all nginx\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" randomall_nginx "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--P")]),a._v(" nginx\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("h2",{attrs:{id:"创建自定义网络"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建自定义网络"}},[a._v("#")]),a._v(" 创建自定义网络")]),a._v(" "),n("ul",[n("li",[a._v("可以创建多个网络，每个网络IP范围均不相同")]),a._v(" "),n("li",[a._v("docker的自定义网络里面有一个DNS服务，可以通过容器名称访问主机")])]),a._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建自定义网络")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network create "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--driver")]),a._v(" bridge myweb\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看自定义网络中的主机")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network inspect myweb\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建容器的时候指定网络")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mynginx1  "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),a._v(" myweb nginx\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mynginx2  "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--net")]),a._v(" myweb nginx\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" mynginx2 "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("ping")]),a._v(" mynginx1\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br")])]),n("h2",{attrs:{id:"连接到指定网络"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#连接到指定网络"}},[a._v("#")]),a._v(" 连接到指定网络")]),a._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mynginx3   nginx\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network connect  myweb mynginx3\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network disconnect myweb mynginx3\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br")])]),n("h2",{attrs:{id:"移除网络"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#移除网络"}},[a._v("#")]),a._v(" 移除网络")]),a._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" myweb\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);