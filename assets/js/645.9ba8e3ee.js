(window.webpackJsonp=window.webpackJsonp||[]).push([[645],{2393:function(e,r,l){"use strict";l.r(r);var a=l(2),t=Object(a.a)({},(function(){var e=this,r=e.$createElement,l=e._self._c||r;return l("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[l("p",[e._v("Title")]),e._v(" "),l("p",[e._v("课前须知：")]),e._v(" "),l("ul",[l("li",[e._v("为了更好的学习体验，请购课后加卡颂微信（kasong555），发送课程购买截图，拉你进专属学习群")]),e._v(" "),l("li",[e._v("参与"),l("a",{attrs:{href:"https://wj.qq.com/s2/11444184/b3e4/",target:"_blank",rel:"noopener noreferrer"}},[e._v("2 个月通关 React 挑战"),l("OutboundLink")],1),e._v("，返现金")]),e._v(" "),l("li",[l("a",{attrs:{href:"https://github.com/BetaSu/big-react/commit/06f1b6b690dd4118a2e0a3a672a2da4cc692b7e2",target:"_blank",rel:"noopener noreferrer"}},[e._v("本节课代码地址"),l("OutboundLink")],1)])]),e._v(" "),l("h1",{attrs:{id:"第十三课-实现-fragment"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#第十三课-实现-fragment"}},[e._v("#")]),e._v(" 第十三课：实现 Fragment")]),e._v(" "),l("p",[e._v("为了提高组件结构灵活性，需要实现"),l("code",[e._v("Fragment")]),e._v("，具体来说，需要区分几种情况：")]),e._v(" "),l("h2",{attrs:{id:"_1-fragment-包裹其他组件"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_1-fragment-包裹其他组件"}},[e._v("#")]),e._v(" 1. Fragment 包裹其他组件")]),e._v(" "),l("p",[l("code",[e._v("<> <div></div> <div></div> </> // 对应DOM <div></div> <div></div>")])]),e._v(" "),l("p",[l("a",{attrs:{href:"https://babeljs.io/repl#?browsers=defaults&build=&builtIns=false&corejs=3.6&spec=false&loose=false&code_lz=DwPgUABBwCYJYDcTAPTyZa7lseVIQA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=react%2Cstage-2&prettier=false&targets=&version=7.19.5&externalPlugins=&assumptions=%7B%7D",target:"_blank",rel:"noopener noreferrer"}},[e._v("这种情况的 JSX 转换结果"),l("OutboundLink")],1)]),e._v(" "),l("p",[l("code",[e._v('jsxs(Fragment, { children: [ jsx("div", {}), jsx("div", {}) ] });')])]),e._v(" "),l("p",[l("code",[e._v("type")]),e._v("为"),l("code",[e._v("Fragment")]),e._v("的"),l("code",[e._v("ReactElement")]),e._v("，对单一"),l("code",[e._v("节点的Diff")]),e._v("需要考虑"),l("code",[e._v("Fragment")]),e._v("的情况。")]),e._v(" "),l("h2",{attrs:{id:"_2-fragment-与其他组件同级"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_2-fragment-与其他组件同级"}},[e._v("#")]),e._v(" 2. Fragment 与其他组件同级")]),e._v(" "),l("p",[l("code",[e._v("<ul> <> <li>1</li> <li>2</li> </> <li>3</li> <li>4</li> </ul> // 对应DOM <ul> <li>1</li> <li>2</li> <li>3</li> <li>4</li> </ul>")])]),e._v(" "),l("p",[l("a",{attrs:{href:"https://babeljs.io/repl#?browsers=defaults&build=&builtIns=false&corejs=3.6&spec=false&loose=false&code_lz=DwVwNgfAUABDzTnYYCWECMwD0bFJXQCYc9Z5t9CIBmU9c6gFnuh3AiA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=react%2Cstage-2&prettier=false&targets=&version=7.19.5&externalPlugins=&assumptions=%7B%7D",target:"_blank",rel:"noopener noreferrer"}},[e._v("这种情况的 JSX 转换结果"),l("OutboundLink")],1)]),e._v(" "),l("p",[l("code",[e._v("jsxs('ul', { children: [ jsxs(Fragment, { children: [ jsx('li', { children: '1' }), jsx('li', { children: '2' }) ] }), jsx('li', { children: '3' }), jsx('li', { children: '4' }) ] });")])]),e._v(" "),l("p",[l("code",[e._v("children")]),e._v("为数组类型，则进入"),l("code",[e._v("reconcileChildrenArray")]),e._v("方法，数组中的某一项为"),l("code",[e._v("Fragment")]),e._v("，所以需要增加**「type 为 Fragment 的 ReactElement 的判断」**，同时"),l("code",[e._v("beginWork")]),e._v("中需要增加"),l("code",[e._v("Fragment")]),e._v("类型的判断。")]),e._v(" "),l("h2",{attrs:{id:"_3-数组形式的-fragment"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#_3-数组形式的-fragment"}},[e._v("#")]),e._v(" 3. 数组形式的 Fragment")]),e._v(" "),l("p",[l("code",[e._v("// arr = [<li>c</li>, <li>d</li>] <ul> <li>a</li> <li>b</li> {arr} </ul> // 对应DOM <ul> <li>a</li> <li>b</li> <li>c</li> <li>d</li> </ul>")])]),e._v(" "),l("p",[l("a",{attrs:{href:"https://babeljs.io/repl#?browsers=defaults&build=&builtIns=false&corejs=3.6&spec=false&loose=false&code_lz=FAHgrgNgfMAEsggSygQxAemTeiUCNNs5YBvVAJwoF9QNIog&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=react%2Cstage-2&prettier=false&targets=&version=7.19.5&externalPlugins=&assumptions=%7B%7D",target:"_blank",rel:"noopener noreferrer"}},[e._v("这种情况的 JSX 转换结果"),l("OutboundLink")],1)]),e._v(" "),l("p",[l("code",[e._v("jsxs('ul', { children: [ jsx('li', { children: 'a' }), jsx('li', { children: 'b' }), arr ] });")])]),e._v(" "),l("p",[l("code",[e._v("children")]),e._v("为数组类型，则进入"),l("code",[e._v("reconcileChildrenArray")]),e._v("方法，数组中的某一项为数组，所以需要增加**「reconcileChildrenArray 中数组类型的判断」**。")]),e._v(" "),l("h2",{attrs:{id:"fragment-对-childdeletion-的影响"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#fragment-对-childdeletion-的影响"}},[e._v("#")]),e._v(" Fragment 对 ChildDeletion 的影响")]),e._v(" "),l("p",[l("code",[e._v("ChildDeletion")]),e._v("删除"),l("code",[e._v("DOM")]),e._v("的逻辑：")]),e._v(" "),l("ul",[l("li",[e._v("找到子树的根 Host 节点")]),e._v(" "),l("li",[e._v("找到子树对应的父级 Host 节点")]),e._v(" "),l("li",[e._v("从父级 Host 节点中删除子树根 Host 节点")])]),e._v(" "),l("p",[e._v("考虑删除 p 节点的情况：")]),e._v(" "),l("p",[l("code",[e._v("<div> <p>xxx</p> </div>")])]),e._v(" "),l("p",[e._v("考虑删除"),l("code",[e._v("Fragment")]),e._v("后，子树的根"),l("code",[e._v("Host")]),e._v("节点可能存在多个：")]),e._v(" "),l("p",[l("code",[e._v("<div> <> <p>xxx</p> <p>yyy</p> </> </div>")])]),e._v(" "),l("h2",{attrs:{id:"对-react-的影响"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#对-react-的影响"}},[e._v("#")]),e._v(" 对 React 的影响")]),e._v(" "),l("p",[l("code",[e._v("React")]),e._v("包需要导出"),l("code",[e._v("Fragment")]),e._v("，用于"),l("code",[e._v("JSX")]),e._v("转换引入"),l("code",[e._v("Fragment")]),e._v("类型")])])}),[],!1,null,null,null);r.default=t.exports}}]);