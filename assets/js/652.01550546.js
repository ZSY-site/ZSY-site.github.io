(window.webpackJsonp=window.webpackJsonp||[]).push([[652],{2401:function(t,e,_){"use strict";_.r(e);var v=_(2),a=Object(v.a)({},(function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("p",[_("a",{attrs:{href:"https://github.com/BetaSu/big-react/commit/25caea0432b10c60b602fbb126269684438ef1c5",target:"_blank",rel:"noopener noreferrer"}},[t._v("本节课代码地址"),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("常见的触发更新的方式：")]),t._v(" "),_("ul",[_("li",[_("code",[t._v("ReactDOM.createRoot().render")]),t._v("（或老版的"),_("code",[t._v("ReactDOM.render")]),t._v("）")]),t._v(" "),_("li",[t._v("this.setState")]),t._v(" "),_("li",[_("code",[t._v("useState")]),t._v("的"),_("code",[t._v("dispatch")]),t._v("方法")])]),t._v(" "),_("p",[t._v("我们希望实现一套统一的更新机制，他的特点是：")]),t._v(" "),_("ul",[_("li",[t._v("兼容上述触发更新的方式")]),t._v(" "),_("li",[t._v("方便后续扩展（优先级机制...）")])]),t._v(" "),_("h2",{attrs:{id:"更新机制的组成部分"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#更新机制的组成部分"}},[t._v("#")]),t._v(" 更新机制的组成部分")]),t._v(" "),_("ul",[_("li",[t._v("代表更新的数据结构 —— "),_("code",[t._v("Update")])]),t._v(" "),_("li",[t._v("消费"),_("code",[t._v("update")]),t._v("的数据结构 —— "),_("code",[t._v("UpdateQueue")])])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://wechatapppro-1252524126.file.myqcloud.com/appjiz2zqrn2142/image/b_u_622f2474a891b_tuQ1ZmhR/lb1kqa1h05cq.png",alt:""}})]),t._v(" "),_("p",[t._v("接下来的工作包括：")]),t._v(" "),_("ul",[_("li",[t._v("实现"),_("code",[t._v("mount")]),t._v("时调用的 API")]),t._v(" "),_("li",[t._v("将该 API 接入上述更新机制中")])]),t._v(" "),_("p",[t._v("需要考虑的事情：")]),t._v(" "),_("ul",[_("li",[t._v("更新可能发生于任意组件，而更新流程是从根节点递归的")]),t._v(" "),_("li",[t._v("需要一个统一的根节点保存通用信息")])]),t._v(" "),_("p",[_("code",[t._v("ReactDOM.createRoot(rootElement).render(<App/>)")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://wechatapppro-1252524126.file.myqcloud.com/appjiz2zqrn2142/image/b_u_622f2474a891b_tuQ1ZmhR/lb1kqa1h0lrm.png",alt:""}})])])}),[],!1,null,null,null);e.default=a.exports}}]);