(window.webpackJsonp=window.webpackJsonp||[]).push([[210],{2399:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[n("a",{attrs:{href:"https://github.com/BetaSu/big-react/commit/208e76bf8f91921b4c492a4d19b7fe506dba9ee2",target:"_blank",rel:"noopener noreferrer"}},[s._v("本节课代码地址"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"前话"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前话"}},[s._v("#")]),s._v(" 前话")]),s._v(" "),n("p",[s._v("搭建项目架构包括如下三点:")]),s._v(" "),n("ul",[n("li",[n("ol",[n("li",[s._v("定义项目结构（monorepo）")])])]),s._v(" "),n("li",[n("ol",{attrs:{start:"2"}},[n("li",[s._v("定义开发规范（lint、commit、tsc、代码风格）")])])]),s._v(" "),n("li",[n("ol",{attrs:{start:"3"}},[n("li",[s._v("选择打包工具")])])])]),s._v(" "),n("h2",{attrs:{id:"项目结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#项目结构"}},[s._v("#")]),s._v(" 项目结构")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("Multi-repo 和 Mono-repo 该如何\n"),n("img",{attrs:{src:a(789),alt:""}})])]),s._v(" "),n("li",[n("p",[s._v("Multi-repo：指的是每个库有自己独立的仓库，逻辑清晰，相对应的，协同管理会更繁琐。（一般业务代码就是 Multi-repo）")])]),s._v(" "),n("li",[n("p",[s._v("Mono-repo：")]),s._v(" "),n("ul",[n("li",[s._v("指的是可以很方便的协同管理不同独立的库的生命周期，但是相对应的，会有更高的操作复杂度。")]),s._v(" "),n("li",[s._v("react 框架有很多的包，比如 react 包，react-dom 包，react-reconciler 包等，我们需要同时管理多个包，这些包又存在依赖关系，所以我们下面的项目选择 Mono-repo 的方式")]),s._v(" "),n("li",[s._v("像 vue 其实也是 Mono-repo 的方式")])])])]),s._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6944877410827370504",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考资料：现代前端工程为什么越来越离不开 Monorepo?"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"mono-repo-技术选型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mono-repo-技术选型"}},[s._v("#")]),s._v(" Mono-repo 技术选型")]),s._v(" "),n("p",[s._v("简单工具：")]),s._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"https://docs.npmjs.com/cli/v7/using-npm/workspaces",target:"_blank",rel:"noopener noreferrer"}},[s._v("npm workspace"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://classic.yarnpkg.com/lang/en/docs/workspaces/",target:"_blank",rel:"noopener noreferrer"}},[s._v("yarn workspace"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://pnpm.io/workspaces",target:"_blank",rel:"noopener noreferrer"}},[s._v("pnpm workspaces"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[s._v("如下的专业工具来实现 Mono-repo 的生命周期的管理：")])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://nx.dev/",target:"_blank",rel:"noopener noreferrer"}},[s._v("nx"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://bit.dev/",target:"_blank",rel:"noopener noreferrer"}},[s._v("bit"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://turborepo.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("turborepo"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://rushjs.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("rush.js"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://nx.dev/",target:"_blank",rel:"noopener noreferrer"}},[s._v("nx"),n("OutboundLink")],1)])]),s._v(" "),n("li",[n("p",[n("a",{attrs:{href:"https://www.lernajs.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("lerna"),n("OutboundLink")],1)])])]),s._v(" "),n("p",[s._v("pnpm 相比其他打包工具的优势：")]),s._v(" "),n("ul",[n("li",[s._v("依赖安装快，依赖之间是通过 link 来连接的")]),s._v(" "),n("li",[s._v("更规范（处理幽灵依赖问题）")])]),s._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/7127295203177676837",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考资料：pnpm 是凭什么对 npm 和 yarn 降维打击的？"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"pnpm-初始化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-初始化"}},[s._v("#")]),s._v(" pnpm 初始化")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://pnpm.io/zh/installation",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装"),n("OutboundLink")],1)]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过npm安装pnpm")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 类似npm init, 都是会在根目录下生成package.json")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" init\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"根目录-pnpm-workspace-yaml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#根目录-pnpm-workspace-yaml"}},[s._v("#")]),s._v(" 根目录\\pnpm-workspace.yaml")]),s._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("packages")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 也就是说所有的包都会放在 根目录\\packages 这个文件夹")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"packages/*"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ul",[n("li",[s._v("[初始化 pnpm-workspace.yaml](https://pnpm.io/\nzh/pnpm-workspace_yaml)")])]),s._v(" "),n("h3",{attrs:{id:"根目录-packages"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#根目录-packages"}},[s._v("#")]),s._v(" 根目录\\packages")]),s._v(" "),n("h3",{attrs:{id:"根目录-history"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#根目录-history"}},[s._v("#")]),s._v(" 根目录\\ .history")]),s._v(" "),n("ul",[n("li",[s._v("根目录下自动生成的 .history 文件夹是 vscode 插件自动生成的")]),s._v(" "),n("li",[s._v("目的是为了防止我们电脑突然断电，死机，而我们代码没保存，这样就寄咯")])]),s._v(" "),n("h3",{attrs:{id:"根目录-gitignore"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#根目录-gitignore"}},[s._v("#")]),s._v(" 根目录\\ .gitignore")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("/node_modules\n.history\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"定义开发规范"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#定义开发规范"}},[s._v("#")]),s._v(" 定义开发规范")]),s._v(" "),n("h3",{attrs:{id:"代码规范检查与修复"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#代码规范检查与修复"}},[s._v("#")]),s._v(" 代码规范检查与修复")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("代码规范：lint 工具")])]),s._v(" "),n("li",[n("p",[s._v("eslint")])]),s._v(" "),n("li",[n("p",[s._v("安装：")])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 由于我们这个项目是Mono-repo, 所以我们在安装依赖的时候要指明要安装到哪个项目里，-w表示在根目录下安装依赖")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" i eslint "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("初始化：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npx是npm提供的")]),s._v("\nnpx eslint "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--init")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# eslint既可以作为代码规范检查，也可以作为代码风格的检查，在这个项目中我们是将代码风格的检查交给 prettier, 因此我们选择：To check syntax and find problems")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 仓库的模块规范选择：esm/JavaScript modules")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Which framework does your project use? 选择none，因为我们是准备写一个react框架")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Where does your code run? 选择node, 即我们项目是在node执行的")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# What format  do you want your config file tot be in? 选择 JSON")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后就会问我们是否需要安装：@typescript-eslint/eslint-plugin@latest @typescript-eslint/parser@lastest")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Which package manager do you want to use? 选择 pnpm")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可能会保存：安装的时候你需要加 -w, 因为我们是Mono-repo项目，那么我们就手动的通过pnpm安装上面的两个包")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装的时候可能又会报错：isn't supported by any available resolver, 其实是因为我们在包名后加了 @lastest, npm可以解析它，但是pnpm 不能解析它，因此我们得把它去掉")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装命令：pnpm i -D -w @typescript-eslint/eslint-plugin @typescript-eslint/parser")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后可能又报错：missing peer xxx，这块没懂")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后执行: pnpm i -D -w typescript")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("ul",[n("li",[s._v("然后你就在项目根目录下生成 .eslintrc.json 文件，配置内容如下：")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"env"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"browser"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"es2021"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 表示继承其他的规则合集")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"extends"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint:recommended"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"plugin:@typescript-eslint/recommended"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prettier"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"plugin:prettier/recommended"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// parser属性指定我们用什么解析器将代码解析成ast语法树，默认的eslint的解析器是不能解析ts代码的，所以我们使用社区开发的 @typescript-eslint/parser 解析器来解析ts代码")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"parser"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@typescript-eslint/parser"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"parserOptions"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ecmaVersion"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latest"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 表示来解析什么版本的js代码")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"sourceType"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"module"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// @typescript-eslint 是ts的一些规则的合集")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 配置它是合集规则")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"plugins"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@typescript-eslint"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prettier"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"rules"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 下面可以配置我们具体的一些规则")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prettier/prettier"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"no-case-declarations"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"off"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"no-constant-condition"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"off"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@typescript-eslint/ban-ts-comment"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"off"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br")])]),n("ul",[n("li",[s._v("安装 ts 的 eslint 插件:")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" i "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" @typescript-eslint/eslint-plugin\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"prettier"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#prettier"}},[s._v("#")]),s._v(" prettier")]),s._v(" "),n("ul",[n("li",[s._v("使用 prettier 来处理代码风格")]),s._v(" "),n("li",[s._v("安装：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" i prettier "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("根目录\\ .prettierrc.json")]),s._v(" "),n("li",[s._v("新建.prettierrc.json 配置文件，添加配置：")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"printWidth"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"tabWidth"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"useTabs"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"singleQuote"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"semi"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 每行的代码添加分号")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"trailingComma"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"none"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bracketSpacing"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("ul",[n("li",[s._v("由于 eslint 也是可以做风格检查的，因此可能与 prettier 产生冲突，所以需要安装插件将 prettier 集成到 eslint 中")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# eslint-config-prettier：该插件会覆盖ESLint本身的规则配置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# eslint-plugin-prettier：该插件会用Prettier来接管修复代码即eslint --fix")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" i eslint-config-prettier eslint-plugin-prettier "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ul",[n("li",[s._v("为 lint 增加对应的执行脚本，并验证效果：")]),s._v(" "),n("li",[s._v("根目录\\package.json")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 表示使用 eslint 处理 ts jsx tsx 的格式代码，--fix表示同时会修复问题，--quiet表示不输出反馈，针对的是 根目录\\packages 这个目录")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint --ext .js,.ts,.jsx,.tsx --fix --quiet ./packages"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ul",[n("li",[n("p",[s._v("然后在 vscode 安装 eslint 和 prettier 两个插件")])]),s._v(" "),n("li",[n("p",[s._v("然后在 vscode 左上角 --\x3e 文件 --\x3e 首选项 --\x3e 设置 --\x3e 搜索 format --\x3e 用户 --\x3e 文本编辑器 --\x3e 然后在【Default Formatter】选择为 【Prettier - Code formatter】 --\x3e 继续勾选上 【Format On Save】")])]),s._v(" "),n("li",[n("p",[s._v("根目录\\packages\\test.js")])])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("ctrl+c 进行保存，发现代码末尾自动添加上分号，说明成功了")]),s._v(" "),n("li",[s._v("验证成功后，安装 prettier 与 eslint 的 VSCode 插件，并在 setting 中设置为保存后自动执行。\n"),n("img",{attrs:{src:a(790),alt:""}})])]),s._v(" "),n("h3",{attrs:{id:"commit-规范检查"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commit-规范检查"}},[s._v("#")]),s._v(" commit 规范检查")]),s._v(" "),n("ul",[n("li",[s._v("也就是说执行 git commit 的时候会对代码进行检查，该项目我们使用 husky")]),s._v(" "),n("li",[s._v("安装"),n("a",{attrs:{href:"https://www.npmjs.com/package/husky",target:"_blank",rel:"noopener noreferrer"}},[s._v("husky"),n("OutboundLink")],1),s._v("，用于拦截 commit 命令：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" i husky "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化 husky")]),s._v("\nnpx husky "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("将刚才实现的格式化命令 pnpm lint 纳入 commit 时 husky 将执行的脚本：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("npx husky "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" .husky/pre-commit "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pnpm lint"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("blockquote",[n("p",[s._v("TODO：pnpm lint 会对代码全量检查，当项目复杂后执行速度可能比较慢，届时可以考虑使用"),n("a",{attrs:{href:"https://github.com/okonet/lint-staged",target:"_blank",rel:"noopener noreferrer"}},[s._v("lint-staged"),n("OutboundLink")],1),s._v("，实现只对暂存区代码进行检查")])]),s._v(" "),n("ul",[n("li",[s._v("通过"),n("a",{attrs:{href:"https://github.com/conventional-changelog/commitlint",target:"_blank",rel:"noopener noreferrer"}},[s._v("commitlint"),n("OutboundLink")],1),s._v("对 git 提交信息进行检查，首先安装必要的库：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" i commitlint @commitlint/cli @commitlint/config-conventional "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"根目录-commitlintrc-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#根目录-commitlintrc-js"}},[s._v("#")]),s._v(" 根目录\\ .commitlintrc.js：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@commitlint/config-conventional"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ul",[n("li",[s._v("将 commit lint 集成到 husky 中：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("npx husky "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" .husky/commit-msg "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npx --no-install commitlint -e '),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HUSKY_GIT_PARAMS")]),s._v('"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("conventional 规范集意义：")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("// 提交的类型: 摘要信息\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("type"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("subject"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("常用的 type 值包括如下:")]),s._v(" "),n("ul",[n("li",[s._v("feat: 添加新功能")]),s._v(" "),n("li",[s._v("fix: 修复 Bug")]),s._v(" "),n("li",[s._v("chore: 一些不影响功能的更改")]),s._v(" "),n("li",[s._v("docs: 专指文档的修改")]),s._v(" "),n("li",[s._v("perf: 性能方面的优化")]),s._v(" "),n("li",[s._v("refactor: 代码重构")]),s._v(" "),n("li",[s._v("test: 添加一些测试代码等等")])]),s._v(" "),n("h3",{attrs:{id:"根目录-tsconfig-json"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#根目录-tsconfig-json"}},[s._v("#")]),s._v(" 根目录\\tsconfig.json：")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"compileOnSave"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"compilerOptions"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"target"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ESNext"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"useDefineForClassFields"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"module"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ESNext"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lib"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ESNext"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DOM"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"moduleResolution"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Node"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"strict"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"sourceMap"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"resolveJsonModule"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"isolatedModules"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"esModuleInterop"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"noEmit"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"noUnusedLocals"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"noUnusedParameters"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"noImplicitReturns"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"skipLibCheck"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"baseUrl"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./packages"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("h3",{attrs:{id:"选择打包工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#选择打包工具"}},[s._v("#")]),s._v(" 选择打包工具")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("比较不同打包工具的区别 "),n("a",{attrs:{href:"https://bundlers.tooling.report/",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考资料：Overview | Tooling.Report"),n("OutboundLink")],1),s._v("我们要开发的项目的特点：")]),s._v(" "),n("ul",[n("li",[n("ol",[n("li",[s._v("是库，而不是业务项目")])])]),s._v(" "),n("li",[n("ol",{attrs:{start:"2"}},[n("li",[s._v("希望工具尽可能简洁、打包产物可读性高")])])]),s._v(" "),n("li",[n("ol",{attrs:{start:"3"}},[n("li",[s._v("原生支持 ESM")])])])])]),s._v(" "),n("li",[n("p",[s._v("所以选择 rollup，安装：")])])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" i "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" rollup\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports},789:function(s,t,a){s.exports=a.p+"assets/img/1.f4936fbe.png"},790:function(s,t,a){s.exports=a.p+"assets/img/2.f9214d45.png"}}]);