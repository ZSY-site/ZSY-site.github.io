(window.webpackJsonp=window.webpackJsonp||[]).push([[320],{2541:function(t,l,v){"use strict";v.r(l);var _=v(2),r=Object(_.a)({},(function(){var t=this,l=t.$createElement,_=t._self._c||l;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"应用场景"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),_("ul",[_("li",[t._v("比如百度希望能获取QQ用户的相册")]),t._v(" "),_("li",[t._v("问题是只有得到用户的授权，QQ才会同意让百度读取这些照片")]),t._v(" "),_("li",[t._v("那么，我们怎样获得用户的授权呢？")])]),t._v(" "),_("p",[t._v("传统方法是，QQ用户将自己的QQ号和密码，告诉百度，百度就可以读取用户的相册了。这样的做法有以下几个严重的缺点")]),t._v(" "),_("ul",[_("li",[_("ol",[_("li",[t._v("百度为了后续的服务，会保存用户的密码，这样很不安全")])])]),t._v(" "),_("li",[_("ol",{attrs:{start:"2"}},[_("li",[t._v("百度不得不部署密码登录，而我们知道，单纯的密码登录并不安全")])])]),t._v(" "),_("li",[_("ol",{attrs:{start:"3"}},[_("li",[t._v("百度拥有了获取用户储存在QQ上所有资料的权力，用户没法限制百度获得授权的范围和有效期。比如百度可能会用咱QQ去支付等。")])])]),t._v(" "),_("li",[_("ol",{attrs:{start:"4"}},[_("li",[t._v("用户只有修改密码，才能收回赋予百度的权力。但是这样做，会使得其他所有获得用户授权的第三方应用程序全部失效。比如你修改了QQ，那么其他网站也都不能用了。")])])]),t._v(" "),_("li",[_("ol",{attrs:{start:"5"}},[_("li",[t._v("只要有一个第三方应用程序被破解，就会导致用户密码泄漏，以及所有被密码保护的数据泄漏。")])])])]),t._v(" "),_("blockquote",[_("p",[t._v("OAuth就是为了解决上面这些问题而诞生的。")])]),t._v(" "),_("h2",{attrs:{id:"名词"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#名词"}},[t._v("#")]),t._v(" 名词")]),t._v(" "),_("ul",[_("li",[_("ol",[_("li",[t._v('client: 第三方应用程序，本文中又称客户端，即上个例子中的"百度"')])])]),t._v(" "),_("li",[_("ol",{attrs:{start:"2"}},[_("li",[t._v('Resource Owner：资源所有者，本文中又称"QQ用户"（user）。')])])]),t._v(" "),_("li",[_("ol",{attrs:{start:"3"}},[_("li",[t._v("User Agent：用户代理，本文中就是指浏览器。")])])]),t._v(" "),_("li",[_("ol",{attrs:{start:"4"}},[_("li",[t._v('http service: 提供服务的HTTP服务提供商， 即上个例子中的"QQ服务器"')])])]),t._v(" "),_("li",[_("ol",{attrs:{start:"5"}},[_("li",[t._v("Authorization server：认证服务器，即服务提供商专门用来处理认证的服务器。")])])]),t._v(" "),_("li",[_("ol",{attrs:{start:"6"}},[_("li",[t._v("Resource server：资源服务器，即服务提供商存放用户生成的资源的服务器。它与认证服务器，可以是同一台服务器，也可以是不同的服务器。")])])])]),t._v(" "),_("blockquote",[_("p",[t._v('OAuth的作用就是让"客户端"安全可控地获取"用户"的授权，与"服务商提供商"进行互动。')])]),t._v(" "),_("h2",{attrs:{id:"设计思路"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#设计思路"}},[t._v("#")]),t._v(" 设计思路")]),t._v(" "),_("ul",[_("li",[t._v('OAuth在"客户端"与"服务提供商"之间，设置了一个授权层（authorization layer）。')]),t._v(" "),_("li",[t._v('"客户端"不能直接登录"服务提供商"，只能登录授权层，以此将用户与客户端区分开来。')]),t._v(" "),_("li",[t._v('"客户端"登录授权层所用的令牌（token），与用户的密码不同。用户可以在登录的时候，指定授权层令牌的权限范围和有效期。')]),t._v(" "),_("li",[t._v('"客户端"登录授权层以后，"服务提供商"根据令牌的权限范围和有效期，向"客户端"开放用户储存的资料。')])]),t._v(" "),_("h2",{attrs:{id:"工作流程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#工作流程"}},[t._v("#")]),t._v(" 工作流程")]),t._v(" "),_("blockquote",[_("p",[t._v("比如想要使用QQ去登录百度，那么百度就会先QQ服务器发请求，然后QQ服务器返回授权。百度使用该授权向授权服务器发请求，授权服务器返回一个令牌给百度。然后百度拿着令牌去请求资源服务器，资源服务器返回对应的资源。\n"),_("img",{attrs:{src:v(829),alt:""}})])]),t._v(" "),_("ul",[_("li",[t._v("A 用户打开客户端以后，客户端要求用户给予授权。")]),t._v(" "),_("li",[t._v("B 用户同意给予客户端授权。")]),t._v(" "),_("li",[t._v("C 客户端使用上一步获得的授权，向【认证服务器】申请令牌。")]),t._v(" "),_("li",[t._v("D 认证服务器对客户端进行认证以后，确认无误，同意发放令牌。")]),t._v(" "),_("li",[t._v("E 客户端使用令牌，向资源服务器申请获取资源。")]),t._v(" "),_("li",[t._v("F 资源服务器确认令牌无误，同意向客户端开放资源。")])])])}),[],!1,null,null,null);l.default=r.exports},829:function(t,l,v){t.exports=v.p+"assets/img/1.6a92a862.png"}}]);