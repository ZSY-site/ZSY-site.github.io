(window.webpackJsonp=window.webpackJsonp||[]).push([[356],{1293:function(t,s,a){t.exports=a.p+"assets/img/402.04e8ec79.png"},2924:function(t,s,a){"use strict";a.r(s);var e=a(2),l=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"核心点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#核心点"}},[t._v("#")]),t._v(" 核心点")]),t._v(" "),e("ul",[e("li",[t._v("使用函数劫持的方式，重写了数组的方法")]),t._v(" "),e("li",[t._v("Vue将data中的数组，进行了原型链重写。指向了自己定义的数组原型方法，这样当调用数组api时，可以通知依赖更新。如果数组中包含着引用类型。会对数组中的引用类型再次进行监控。")])]),t._v(" "),e("h2",{attrs:{id:"具体实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#具体实现"}},[t._v("#")]),t._v(" 具体实现")]),t._v(" "),e("ul",[e("li",[e("ol",[e("li",[t._v("在Vue初始化的时候，会调用initData方法，它会拿到当前用户传入的数据data")])])]),t._v(" "),e("li",[e("ol",{attrs:{start:"2"}},[e("li",[t._v("内部会有一个 Observer类，通过创建这个类的实例，调用实例的observer方法对数据data进行观测")])])]),t._v(" "),e("li",[e("ol",{attrs:{start:"3"}},[e("li",[t._v("如果数据data是数组类型的话，则会先后进行如下的操作：")])]),t._v(" "),e("ul",[e("li",[t._v("(1) 会调用 protoAugment方法，让数组的原型方法指向重写的原型\n"),e("ul",[e("li",[t._v("上边的【重写的原型】其实就是对数组的原型方法进行重写（包括push pop shift unshift splice sort reverse）这7个方法才是会改变数组本身")]),t._v(" "),e("li",[t._v("当用户调用这7个方法后，内部会调用原数组的方法，然后通知视图更新")]),t._v(" "),e("li",[t._v("对于 push unshift splice，这3个方法会导致数组的项新增数据，那么也会对新增的项进行观测")])])]),t._v(" "),e("li",[t._v("(2) 深度观测数组中的每一项")])])])]),t._v(" "),e("p",[e("img",{attrs:{src:a(1293),alt:""}})])])}),[],!1,null,null,null);s.default=l.exports}}]);