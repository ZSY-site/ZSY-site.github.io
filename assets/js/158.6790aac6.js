(window.webpackJsonp=window.webpackJsonp||[]).push([[158],{2252:function(s,a,t){"use strict";t.r(a);var e=t(2),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"软件下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#软件下载"}},[s._v("#")]),s._v(" 软件下载")]),s._v(" "),e("p",[s._v("软件下载地址：https://www.elastic.co/cn/downloads/past-releases/elasticsearch-7-8-0")]),s._v(" "),e("p",[e("img",{attrs:{src:t(642),alt:""}})]),s._v(" "),e("h2",{attrs:{id:"软件安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#软件安装"}},[s._v("#")]),s._v(" 软件安装")]),s._v(" "),e("ol",[e("li",[s._v("解压软件\n将下载的软件解压缩")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压缩")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" elasticsearch-7.8.0-linux-x86_64.tar.gz "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-C")]),s._v(" /opt/module\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 改名")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" elasticsearch-7.8.0 es\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("创建用户\n因为安全问题，Elasticsearch 不允许 root 用户直接运行，所以要创建新用户，在 root 用\n户中创建新用户")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" es "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#新增 es 用户")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" es "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#为 es 用户设置密码")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("userdel")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" es "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果错了，可以删除再加")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-R")]),s._v(" es:es /opt/module/es "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#文件夹所有者")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("修改配置文件\n修改/opt/module/es/config/elasticsearch.yml 文件")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 加入如下配置")]),s._v("\ncluster.name: elasticsearch\nnode.name: node-1\nnetwork.host: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\nhttp.port: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v("\ncluster.initial_master_nodes: "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node-1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("修改/etc/security/limits.conf")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在文件末尾中增加下面内容")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每个进程可以打开的文件数的限制")]),s._v("\nes soft nofile "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\nes hard nofile "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("修改/etc/security/limits.d/20-nproc.conf")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在文件末尾中增加下面内容")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 每个进程可以打开的文件数的限制")]),s._v("\nes soft nofile "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\nes hard nofile "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 操作系统级别对每个用户创建的进程数的限制")]),s._v("\n* hard nproc "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注：* 带表 Linux 所有用户名称")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("修改/etc/sysctl.conf")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在文件中增加下面内容")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一个进程可以拥有的 VMA(虚拟内存区域)的数量,默认值为 65536")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("vm.max_map_count")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("655360")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("重新加载\nsysctl -p")]),s._v(" "),e("h2",{attrs:{id:"启动软件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动软件"}},[s._v("#")]),s._v(" 启动软件")]),s._v(" "),e("p",[s._v("使用 ES 用户启动")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt/module/es/\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动")]),s._v("\nbin/elasticsearch\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#后台启动")]),s._v("\nbin/elasticsearch "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("启动时，会动态生成文件，如果文件所属用户不匹配，会发生错误，需要重新进行修改用户\n和用户组\n"),e("img",{attrs:{src:t(643),alt:""}})]),s._v(" "),e("p",[s._v("关闭防火墙")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#暂时关闭防火墙")]),s._v("\nsystemctl stop firewalld\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#永久关闭防火墙")]),s._v("\nsystemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" firewalld.service "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#打开放货抢永久性生效，重启后不会复原")]),s._v("\nsystemctl disable firewalld.service "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#关闭防火墙，永久性生效，重启后不会复原")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"测试软件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试软件"}},[s._v("#")]),s._v(" 测试软件")]),s._v(" "),e("p",[s._v("浏览器中输入地址：http://linux1:9200/")]),s._v(" "),e("p",[e("img",{attrs:{src:t(644),alt:""}})])])}),[],!1,null,null,null);a.default=n.exports},642:function(s,a,t){s.exports=t.p+"assets/img/114.2764a058.png"},643:function(s,a,t){s.exports=t.p+"assets/img/115.b2360799.png"},644:function(s,a,t){s.exports=t.p+"assets/img/116.ff16a440.png"}}]);